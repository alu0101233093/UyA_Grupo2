<!DOCTYPE html>
<html>
<head>
    <title>Ajax; Firebase</title>
 
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
    <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/> 
    

</head>
  <body>
    <div align="center">
      <h1>Java Script: Ajax; Firebase</h1>
      <p>AJAX es un acrónimo de Asynchronous JavaScript + XML, que se puede traducir como "JavaScript asíncrono + XML"</p>
      
      <form action="https://www.ull.es/" method="post">
          <p>Puedes introducir tu correo, si quieres suscribirte</p>
            
          <div class="row">
            <div class="col s12">  
              <label for="newsletterUsuarioInput">Usuario</label>
              <input id="usuarioInput" name="Usuario" required="" size="30">
            </div>
            <div class="col s12"> 
              <br>
              <input type="button" id="botonenviar" value="Enviar">
              <div class="row">
                <p id="incoming"></p>
                <div class="col s4 center push-s4"  id="texto"></div>
              </div>
              <div class="row">
                <p id="incoming"></p>
                <div class="col s4 center push-s4" id="texto"></div>
              </div>
            </div>
          </div>
      </form>
      <!--<script src="js/firebase.js"></script>-->
    </div>
    
    <!--  Scripts-->
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.14.0/firebase-database.js"></script>

    <!--JavaScript at end of body for optimized loading-->
    <script type="text/javascript" src="js/materialize.min.js"></script>
    <script src="js/init.js"></script>    
    <!-- <script src="js/ajaxget.js"></script> --> 

    <script type="module">

      import { getDatabase} from "../node_modules/firebase/database.js";
      import { initializeApp } from "../node_modules/firebase/firebase-app";
      import { getAnalytics } from "../node_modules/firebase/firebase-analytics";


      $('#botonenviar').on("click", function( event ) {  
      // Your web app's Firebase configuration
        console.log("INICIE LA APP");
        var firebaseConfig = {
          apiKey: "AIzaSyAuOkcu74iEsSSkI7nxllQZmWVRSTmeWx0",
          authDomain: "uya-g2-674ce.firebaseapp.com",
          databaseURL: "https://uya-g2-674ce-default-rtdb.europe-west1.firebasedatabase.app",
          projectId: "uya-g2-674ce",
          storageBucket: "uya-g2-674ce.appspot.com",
          messagingSenderId: "174249225002",
          appId: "1:174249225002:web:ccc6bd049342e282984c53",
          measurementId: "G-ZWMYSP352K"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        // firebase.initializeApp(firebaseConfig);

        //Referencia a la base de datos
        var database = getDatabase(app);

        var query = database.ref().child(0);// .child(0).orderByChild(‌​"From").equalTo('2')‌​; 
        query.on("value", function(snapshot) {
          console.log(snapshot.key); // this will print HukMessages, because that's the location you queried
          console.log(snapshot); // this will print HukMessages, because that's the location you queried

          snapshot.forEach(function(child) {
            console.log(child.key); // this will print the key of a message
            console.log(child); // this will print the key of a message
          });
        });
        console.log("child.key"); // this will print the key of a message
      });
    </script>
    
  </body>

</html>